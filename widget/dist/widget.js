/*! For license information please see widget.js.LICENSE.txt */
!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SnapQuestionWidget=e():n.SnapQuestionWidget=e()}(this,()=>(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var i={},a=[],s=0;s<n.length;s++){var d=n[s],c=o.base?d[0]+o.base:d[0],p=i[c]||0,l="".concat(c," ").concat(p);i[c]=p+1;var u=t(l),g={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)e[u].references++,e[u].updater(g);else{var f=r(g,o);o.byIndex=s,e.splice(s,0,{identifier:l,updater:f,references:1})}a.push(l)}return a}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var i=o(n=n||[],r=r||{});return function(n){n=n||[];for(var a=0;a<i.length;a++){var s=t(i[a]);e[s].references--}for(var d=o(n,r),c=0;c<i.length;c++){var p=t(i[c]);0===e[p].references&&(e[p].updater(),e.splice(p,1))}i=d}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,o,r,i){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(a[d]=!0)}for(var c=0;c<n.length;c++){var p=[].concat(n[c]);o&&a[p[0]]||(void 0!==i&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=i),t&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=t):p[2]=t),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),e.push(p))}},e}},365:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),i=t(314),a=t.n(i)()(r());a.push([n.id,"/* SnapQuestion Widget Styles */\n.sq-widget-container {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 999999;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n}\n\n.sq-widget-bubble {\n  width: 60px;\n  height: 60px;\n  border-radius: 30px;\n  background-color: #3B82F6;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  transition: transform 0.2s, box-shadow 0.2s;\n}\n\n.sq-widget-bubble:hover {\n  transform: scale(1.05);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n}\n\n.sq-widget-window {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 380px;\n  height: 600px;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  animation: slideUp 0.3s ease-out;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.sq-widget-header {\n  background: #3B82F6;\n  color: white;\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.sq-widget-header-content h3 {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n.sq-widget-header-content p {\n  margin: 4px 0 0 0;\n  font-size: 13px;\n  opacity: 0.9;\n}\n\n.sq-widget-close {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0.8;\n  transition: opacity 0.2s;\n}\n\n.sq-widget-close:hover {\n  opacity: 1;\n}\n\n.sq-widget-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  background: #F9FAFB;\n}\n\n.sq-widget-welcome {\n  text-align: center;\n  padding: 20px;\n}\n\n.sq-widget-avatar {\n  font-size: 48px;\n  margin-bottom: 10px;\n}\n\n.sq-widget-welcome p {\n  color: #6B7280;\n  font-size: 14px;\n  margin: 0;\n}\n\n.sq-widget-message {\n  margin-bottom: 16px;\n  display: flex;\n  animation: fadeIn 0.3s ease-out;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.sq-widget-message-user {\n  justify-content: flex-end;\n}\n\n.sq-widget-message-bot {\n  justify-content: flex-start;\n}\n\n.sq-widget-message-bubble {\n  max-width: 70%;\n  padding: 12px 16px;\n  border-radius: 18px;\n  font-size: 14px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n.sq-widget-message-user .sq-widget-message-bubble {\n  background: #3B82F6;\n  color: white;\n  border-bottom-right-radius: 4px;\n}\n\n.sq-widget-message-bot .sq-widget-message-bubble {\n  background: white;\n  color: #1F2937;\n  border-bottom-left-radius: 4px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\n}\n\n.sq-widget-confidence {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: white;\n  border-radius: 8px;\n  font-size: 12px;\n  color: #6B7280;\n}\n\n.sq-widget-confidence-bar {\n  margin-top: 4px;\n  height: 4px;\n  background: #E5E7EB;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.sq-widget-confidence-bar > div {\n  height: 100%;\n  transition: width 0.5s ease-out;\n}\n\n.sq-widget-citations {\n  margin-top: 8px;\n  padding: 8px 12px;\n  background: white;\n  border-radius: 8px;\n  font-size: 12px;\n  color: #6B7280;\n}\n\n.sq-widget-citations span {\n  color: #3B82F6;\n  font-weight: 500;\n}\n\n.sq-widget-typing {\n  display: inline-flex;\n  padding: 12px 16px;\n  background: white;\n  border-radius: 18px;\n  border-bottom-left-radius: 4px;\n}\n\n.sq-widget-typing span {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #9CA3AF;\n  margin: 0 2px;\n  animation: bounce 1.4s infinite ease-in-out;\n}\n\n.sq-widget-typing span:nth-child(1) {\n  animation-delay: -0.32s;\n}\n\n.sq-widget-typing span:nth-child(2) {\n  animation-delay: -0.16s;\n}\n\n@keyframes bounce {\n  0%, 80%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.sq-widget-input-container {\n  padding: 16px;\n  background: white;\n  border-top: 1px solid #E5E7EB;\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n}\n\n.sq-widget-input {\n  flex: 1;\n  padding: 10px 14px;\n  border: 1px solid #D1D5DB;\n  border-radius: 20px;\n  font-size: 14px;\n  resize: none;\n  outline: none;\n  font-family: inherit;\n  line-height: 1.5;\n  max-height: 100px;\n  transition: border-color 0.2s;\n}\n\n.sq-widget-input:focus {\n  border-color: #3B82F6;\n}\n\n.sq-widget-send {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: none;\n  background: #3B82F6;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s, opacity 0.2s;\n}\n\n.sq-widget-send:hover {\n  transform: scale(1.05);\n}\n\n.sq-widget-send:active {\n  transform: scale(0.95);\n}\n\n/* Mobile responsiveness */\n@media (max-width: 480px) {\n  .sq-widget-window {\n    width: 100vw;\n    height: 100vh;\n    bottom: 0;\n    right: 0;\n    border-radius: 0;\n  }\n  \n  .sq-widget-container {\n    bottom: 0;\n    right: 0;\n  }\n  \n  .sq-widget-bubble {\n    bottom: 20px;\n    right: 20px;\n    position: fixed;\n  }\n}",""]);const s=a},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return n[o](i,i.exports,t),i.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),r=t.n(o),i=t(825),a=t.n(i),s=t(659),d=t.n(s),c=t(56),p=t.n(c),l=t(540),u=t.n(l),g=t(113),f=t.n(g),h=t(365),m={};function v(){var n,e,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function i(t,o,r,i){var d=o&&o.prototype instanceof s?o:s,c=Object.create(d.prototype);return b(c,"_invoke",function(t,o,r){var i,s,d,c=0,p=r||[],l=!1,u={p:0,n:0,v:n,a:g,f:g.bind(n,4),d:function(e,t){return i=e,s=0,d=n,u.n=t,a}};function g(t,o){for(s=t,d=o,e=0;!l&&c&&!r&&e<p.length;e++){var r,i=p[e],g=u.p,f=i[2];t>3?(r=f===o)&&(d=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=n):i[0]<=g&&((r=t<2&&g<i[1])?(s=0,u.v=o,u.n=i[1]):g<f&&(r=t<3||i[0]>o||o>f)&&(i[4]=t,i[5]=o,u.n=f,s=0))}if(r||t>1)return a;throw l=!0,o}return function(r,p,f){if(c>1)throw TypeError("Generator is already running");for(l&&1===p&&g(p,f),s=p,d=f;(e=s<2?n:d)||!l;){i||(s?s<3?(s>1&&(u.n=-1),g(s,d)):u.n=d:u.v=d);try{if(c=2,i){if(s||(r="next"),e=i[r]){if(!(e=e.call(i,d)))throw TypeError("iterator result is not an object");if(!e.done)return e;d=e.value,s<2&&(s=0)}else 1===s&&(e=i.return)&&e.call(i),s<2&&(d=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=n}else if((e=(l=u.n<0)?d:t.call(o,u))!==a)break}catch(e){i=n,s=1,d=e}finally{c=1}}return{value:e,done:l}}}(t,r,i),!0),c}var a={};function s(){}function d(){}function c(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(b(e={},o,function(){return this}),e),l=c.prototype=s.prototype=Object.create(p);function u(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,c):(n.__proto__=c,b(n,r,"GeneratorFunction")),n.prototype=Object.create(l),n}return d.prototype=c,b(l,"constructor",c),b(c,"constructor",d),d.displayName="GeneratorFunction",b(c,r,"GeneratorFunction"),b(l),b(l,r,"Generator"),b(l,o,function(){return this}),b(l,"toString",function(){return"[object Generator]"}),(v=function(){return{w:i,m:u}})()}function b(n,e,t,o){var r=Object.defineProperty;try{r({},"",{})}catch(n){r=0}b=function(n,e,t,o){function i(e,t){b(n,e,function(n){return this._invoke(e,t,n)})}e?r?r(n,e,{value:t,enumerable:!o,configurable:!o,writable:!o}):n[e]=t:(i("next",0),i("throw",1),i("return",2))},b(n,e,t,o)}function y(n,e,t,o,r,i,a){try{var s=n[i](a),d=s.value}catch(n){return void t(n)}s.done?e(d):Promise.resolve(d).then(o,r)}return m.styleTagTransform=f(),m.setAttributes=p(),m.insert=d().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=u(),r()(h.A,m),h.A&&h.A.locals&&h.A.locals,function(){var n={apiUrl:"http://localhost:8000",appUrl:"http://localhost:3000",position:"bottom-right",primaryColor:"#3B82F6",tenant:null};function e(){var e=document.currentScript||document.querySelector("script[data-tenant]");e&&(n.tenant=e.getAttribute("data-tenant"),n.position=e.getAttribute("data-position")||n.position,n.primaryColor=e.getAttribute("data-color")||n.primaryColor,n.apiUrl=e.getAttribute("data-api-url")||n.apiUrl),function(){var e=document.createElement("div");e.id="snapquestion-widget",e.className="sq-widget-container","bottom-left"===n.position&&(e.style.left="20px",e.style.right="auto");var r=document.createElement("button");r.className="sq-widget-bubble",r.style.backgroundColor=n.primaryColor,r.innerHTML='\n      <svg width="28" height="28" viewBox="0 0 24 24" fill="white">\n        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>\n        <path d="M7 9h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"/>\n      </svg>\n    ';var i=document.createElement("div");i.className="sq-widget-window",i.style.display="none",i.innerHTML='\n      <div class="sq-widget-header" style="background-color: '.concat(n.primaryColor,'">\n        <div class="sq-widget-header-content">\n          <h3>SnapQuestion Support</h3>\n          <p>Ask us anything!</p>\n        </div>\n        <button class="sq-widget-close">\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="white">\n            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n          </svg>\n        </button>\n      </div>\n      <div class="sq-widget-messages">\n        <div class="sq-widget-welcome">\n          <div class="sq-widget-avatar">👋</div>\n          <p>Hi! How can we help you today?</p>\n        </div>\n      </div>\n      <div class="sq-widget-input-container">\n        <textarea \n          class="sq-widget-input" \n          placeholder="Type your message..."\n          rows="1"\n        ></textarea>\n        <button class="sq-widget-send" style="background-color: ').concat(n.primaryColor,'">\n          <svg width="20" height="20" viewBox="0 0 24 24" fill="white">\n            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>\n          </svg>\n        </button>\n      </div>\n    '),e.appendChild(r),e.appendChild(i),document.body.appendChild(e),r.addEventListener("click",t),i.querySelector(".sq-widget-close").addEventListener("click",t);var a=i.querySelector(".sq-widget-input");i.querySelector(".sq-widget-send").addEventListener("click",o),a.addEventListener("keypress",function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),o())}),a.addEventListener("input",function(){this.style.height="auto",this.style.height=Math.min(this.scrollHeight,100)+"px"})}()}function t(){var n=document.querySelector(".sq-widget-window"),e=document.querySelector(".sq-widget-bubble");"none"===n.style.display?(n.style.display="flex",e.style.display="none",setTimeout(function(){document.querySelector(".sq-widget-input").focus()},100)):(n.style.display="none",e.style.display="flex")}function o(){return r.apply(this,arguments)}function r(){var e;return e=v().m(function e(){var t,o,r,d,c,p;return v().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=document.querySelector(".sq-widget-input"),o=t.value.trim()){e.n=1;break}return e.a(2);case 1:return i(o,"user"),t.value="",t.style.height="auto",r=a(),e.p=2,e.n=3,fetch("".concat(n.apiUrl,"/v1/answer"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer DEV"},body:JSON.stringify({tenant_id:n.tenant||"demo",query_text:o})});case 3:return d=e.v,e.n=4,d.json();case 4:c=e.v,s(r),i(c.answer,"bot",c),e.n=6;break;case 5:e.p=5,p=e.v,console.error("Error sending message:",p),s(r),i("Sorry, I encountered an error. Please try again.","bot",{error:!0});case 6:return e.a(2)}},e,null,[[2,5]])}),r=function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function a(n){y(i,o,r,a,s,"next",n)}function s(n){y(i,o,r,a,s,"throw",n)}a(void 0)})},r.apply(this,arguments)}function i(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.querySelector(".sq-widget-messages"),i=document.createElement("div");if(i.className="sq-widget-message sq-widget-message-".concat(t),"user"===t)i.innerHTML='\n        <div class="sq-widget-message-bubble" style="background-color: '.concat(n.primaryColor,'">\n          ').concat(d(e),"\n        </div>\n      ");else{var a='\n        <div class="sq-widget-message-bubble">\n          '.concat(d(e),"\n        </div>\n      ");if(void 0!==o.confidence){var s=Math.round(100*o.confidence),c=o.confidence>.8?"#10B981":o.confidence>.6?"#F59E0B":"#EF4444";a+='\n          <div class="sq-widget-confidence">\n            <span>Confidence: '.concat(s,'%</span>\n            <div class="sq-widget-confidence-bar">\n              <div style="width: ').concat(s,"%; background-color: ").concat(c,'"></div>\n            </div>\n          </div>\n        ')}o.citations&&o.citations.length>0&&(a+='<div class="sq-widget-citations">Sources: ',o.citations.forEach(function(n,e){e>0&&(a+=", "),a+="<span>".concat(d(n.title),"</span>")}),a+="</div>"),i.innerHTML=a}r.appendChild(i),r.scrollTop=r.scrollHeight}function a(){var n=document.querySelector(".sq-widget-messages"),e=document.createElement("div"),t="typing-"+Date.now();return e.id=t,e.className="sq-widget-message sq-widget-message-bot",e.innerHTML='\n      <div class="sq-widget-typing">\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n    ',n.appendChild(e),n.scrollTop=n.scrollHeight,t}function s(n){var e=document.getElementById(n);e&&e.remove()}function d(n){var e=document.createElement("div");return e.textContent=n,e.innerHTML}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.SnapQuestionWidget={init:e,toggle:t,config:n}}(),{}})());